import{i as S,a as q,R as E,S as N,N as T,P as x}from"./assets/vendor-CEL2a_m2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const O=()=>{const e=document.querySelector("[data-menu]"),t=document.querySelector("[data-menu-open]"),n=document.querySelector("[data-menu-close]"),a=document.querySelectorAll(".mobile-menu__nav-link");t.addEventListener("click",()=>{e.classList.add("is-open"),document.body.classList.add("no-scroll")}),n.addEventListener("click",s),a.forEach(r=>r.addEventListener("click",s));function s(){e.classList.remove("is-open"),document.body.classList.remove("no-scroll")}};let o=null,c=null;const $=300;let L=0;const F=()=>{o=document.createElement("div"),o.className="loader",o.innerHTML='<div class="spinner"></div>',document.body.appendChild(o)},I=()=>{o||F(),o.classList.contains("is-visible")||(L=Date.now(),o.classList.add("is-visible")),c&&(clearTimeout(c),c=null)},P=()=>{const e=Date.now()-L,t=Math.max(0,$-e);c&&clearTimeout(c),c=setTimeout(()=>{o&&o.classList.remove("is-visible"),c=null},t)},B={position:"topRight",timeout:3e3,closeOnClick:!0,pauseOnHover:!0,progressBar:!0,animateInside:!1},m=(e,t,n,a={})=>{S[e]({title:t,message:n,...B,...a})},H={success:(e,t)=>m("success","Success",e,t),error:(e,t)=>m("error","Error",e,{timeout:5e3,...t}),info:(e,t)=>m("info","Info",e,t)},p=q.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:1e4});let u=0;const R=()=>{u+=1,I()},_=()=>{u=Math.max(0,u-1),u===0&&P()};p.interceptors.request.use(e=>(R(),e),e=>(_(),Promise.reject(e)));p.interceptors.response.use(e=>(_(),e),e=>{var a,s,r;_();const t=(a=e.response)==null?void 0:a.status,n=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||(t?`Error: ${t}`:"Network error. Please check your connection.");return H.error(n),Promise.reject({message:n,status:t,original:e})});const j=e=>p.get("/artists",{params:e}).then(({data:t})=>t),C=async e=>(await j(e)).artists||[],D=document.querySelector(".artists__list"),w=async({limit:e,page:t})=>C({limit:e,page:t}),k=document.querySelector(".artists__button");let b=1,h={limit:8,page:1};k.addEventListener("click",()=>{b+=1,h={limit:8,page:b},A()});async function A(){const e=await w(h);G(e),e.length<h.limit&&(k.style.display="none")}A();function z(e){const{_id:t,strArtist:n,strBiographyEN:a,strArtistThumb:s,genres:r}=e,l=Array.isArray(r)&&r.length?r.map(M=>`<li class="artists__genre">${M}</li>`).join(""):"";return`<li class="artists__item">
        <img class="artists__img" src="${s}" alt="${n}" />
        <div class="artists__info">
          <ul class="artists__genres">
            ${l}
          </ul>
          <h3 class="artists__name">${n}</h3>
          <p class="artists__desc">${a}</p>
        </div>
       <button class="artists__learn-more" data-id="${t}">
          Learn More <svg class="artists__learn-more-icon" width="24" height="24">
    <use href="/img/icons.svg#icon-caret-right"></use>
  </svg>
        </button>
      </li>
`}function V(e){return e.map(z).join("")}function G(e){const t=V(e);D.insertAdjacentHTML("beforeend",t)}const K=async e=>await p.get("/feedbacks",{params:e}).then(({data:t})=>t),U=async e=>(await K(e)).data||[],J="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='20'%20height='19'%20fill='none'%20viewBox='0%200%2020%2019'%3e%3cpath%20fill='%23764191'%20d='M9.07.612c.345-.816%201.515-.816%201.86%200l2.028%204.82c.145.343.473.579.849.608l5.266.417c.892.071%201.254%201.171.574%201.746L15.635%2011.6a.99.99%200%200%200-.324.985l1.225%205.077c.208.86-.74%201.54-1.503%201.08l-4.508-2.721a1.02%201.02%200%200%200-1.05%200l-4.508%202.72c-.764.461-1.711-.219-1.503-1.079l1.225-5.077a.99.99%200%200%200-.324-.985L.353%208.203c-.68-.575-.318-1.675.574-1.746l5.266-.417c.377-.03.704-.265.85-.609z'/%3e%3c/svg%3e",Q="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='20'%20height='19'%20fill='none'%20viewBox='0%200%2020%2019'%3e%3cpath%20fill='%23fff'%20d='M9.07.612c.345-.816%201.515-.816%201.86%200l2.028%204.82c.145.343.473.579.849.608l5.266.417c.892.071%201.254%201.171.574%201.746L15.635%2011.6a.99.99%200%200%200-.324.985l1.225%205.077c.208.86-.74%201.54-1.503%201.08l-4.508-2.721a1.02%201.02%200%200%200-1.05%200l-4.508%202.72c-.764.461-1.711-.219-1.503-1.079l1.225-5.077a.99.99%200%200%200-.324-.985L.353%208.203c-.68-.575-.318-1.675.574-1.746l5.266-.417c.377-.03.704-.265.85-.609z'/%3e%3c/svg%3e",W=(e=document)=>{e.querySelectorAll(".feedback__rating").forEach(n=>{const a=Number(n.dataset.rating)||0;n.innerHTML="",new E(n,{readOnly:!0,score:a,number:5,starType:"img",path:"",starOn:J,starOff:Q}).init()})},i={section:document.querySelector(".feedback"),wrapper:document.querySelector(".feedback__wrapper"),dotFirst:document.querySelector(".feedback__dot--first"),dotMiddle:document.querySelector(".feedback__dot--middle"),dotLast:document.querySelector(".feedback__dot--last")},v=e=>String(e??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"),X=()=>{[i.dotFirst,i.dotMiddle,i.dotLast].forEach(e=>{e&&e.classList.remove("is-active")})},d=e=>{X(),e==="first"&&i.dotFirst&&i.dotFirst.classList.add("is-active"),e==="middle"&&i.dotMiddle&&i.dotMiddle.classList.add("is-active"),e==="last"&&i.dotLast&&i.dotLast.classList.add("is-active")},f=(e,t)=>{if(t<=1){d("first");return}if(e===0){d("first");return}if(e===t-1){d("last");return}d("middle")},Y=e=>{const t=v((e==null?void 0:e.name)??"Anonymous"),n=v((e==null?void 0:e.descr)??""),a=Number(e==null?void 0:e.rating),s=isNaN(a)?0:Math.round(a);return`
    <li class="feedback__slide swiper-slide" role="listitem">
      <div 
        class="feedback__rating"
        data-rating="${s}"
        aria-label="Rating ${s} out of 5">
      </div>
      <blockquote class="feedback__quote">"${n}"</blockquote>
      <p class="feedback__author">${t}</p>
    </li>
  `},Z=e=>{i.wrapper&&(i.wrapper.innerHTML=e.map(Y).join(""))};let g=null;const y=e=>{g&&g.destroy(!0,!0),g=new N(".feedback__slider",{modules:[T,x],slidesPerView:1,spaceBetween:24,loop:!1,navigation:{nextEl:".feedback__nav--next",prevEl:".feedback__nav--prev"},on:{init(t){f(t.activeIndex,e)},slideChange(t){f(t.activeIndex,e)}}})},ee=async()=>{if(!(!i.section||!i.wrapper))try{const e=await U({limit:10,page:1});if(!e.length){i.wrapper.innerHTML=`
        <li class="feedback__slide swiper-slide">
          <blockquote class="feedback__quote">"No feedbacks yet."</blockquote>
          <p class="feedback__author">â€”</p>
        </li>
      `,y(1),f(0,1);return}const t=e.slice(0,10);Z(t),y(t.length),W(i.wrapper),f(0,t.length)}catch{}};document.addEventListener("DOMContentLoaded",()=>{O(),w({limit:8,page:1}),ee()});
//# sourceMappingURL=index.js.map
