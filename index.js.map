{"version":3,"file":"index.js","sources":["../src/js/utils/loader.js","../src/js/utils/toast.js","../src/js/api/axios-instance.js","../src/js/api/artists-api.js","../src/js/sections/artists.js","../src/js/main.js"],"sourcesContent":["let loaderElement = null;\nlet hideTimeout = null;\n\nconst MIN_VISIBLE_TIME = 300;\nlet lastShowTime = 0;\n\nconst createLoader = () => {\n  loaderElement = document.createElement('div');\n  loaderElement.className = 'loader';\n  loaderElement.innerHTML = '<div class=\"spinner\"></div>';\n  document.body.appendChild(loaderElement);\n};\n\nexport const showLoader = () => {\n  if (!loaderElement) {\n    createLoader();\n  }\n  lastShowTime = Date.now();\n  loaderElement.classList.add('is-visible');\n\n  if (hideTimeout) {\n    clearTimeout(hideTimeout);\n    hideTimeout = null;\n  }\n};\n\nexport const hideLoader = () => {\n  if (!loaderElement) return;\n\n  const elapsed = Date.now() - lastShowTime;\n  const delay = Math.max(0, MIN_VISIBLE_TIME - elapsed);\n\n  if (hideTimeout) clearTimeout(hideTimeout);\n\n  hideTimeout = setTimeout(() => {\n    if (loaderElement) {\n      loaderElement.classList.remove('is-visible');\n    }\n    hideTimeout = null;\n  }, delay);\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst BASE_CONFIG = {\n  position: 'topRight',\n  timeout: 3000,\n  closeOnClick: true,\n  pauseOnHover: true,\n  progressBar: true,\n  animateInside: false,\n};\n\nconst show = (type, title, message, options = {}) => {\n  iziToast[type]({\n    title,\n    message,\n    ...BASE_CONFIG,\n    ...options,\n  });\n};\n\nexport const toast = {\n  success: (message, options) => show('success', 'Success', message, options),\n\n  error: (message, options) =>\n    show('error', 'Error', message, {\n      timeout: 5000,\n      ...options,\n    }),\n\n  info: (message, options) => show('info', 'Info', message, options),\n};\n","import axios from 'axios';\nimport { showLoader, hideLoader } from '../utils/loader';\nimport { toast } from '../utils/toast';\n\nconst instance = axios.create({\n  baseURL: 'https://sound-wave.b.goit.study/api',\n  timeout: 10000,\n});\n\nlet pendingRequests = 0;\nconst startLoading = () => {\n  pendingRequests += 1;\n  showLoader();\n};\nconst stopLoading = () => {\n  pendingRequests = Math.max(0, pendingRequests - 1);\n  if (pendingRequests === 0) hideLoader();\n};\n\ninstance.interceptors.request.use(\n  config => {\n    startLoading();\n    return config;\n  },\n  error => {\n    stopLoading();\n    return Promise.reject(error);\n  }\n);\n\ninstance.interceptors.response.use(\n  response => {\n    stopLoading();\n    return response;\n  },\n  error => {\n    stopLoading();\n\n    const status = error.response?.status;\n    const message =\n      error.response?.data?.message ||\n      (status\n        ? `Error: ${status}`\n        : 'Network error. Please check your connection.');\n\n    toast.error(message);\n\n    return Promise.reject({ message, status, original: error });\n  }\n);\n\nexport default instance;\n","import instance from './axios-instance';\n\nconst fetchArtists = params =>\n  instance.get('/artists', { params }).then(({ data }) => data);\n\nexport const getArtistsInfo = async params => {\n  try {\n    const response = await fetchArtists(params);\n    return response.artists;\n  } catch (error) {\n    throw error;\n  }\n};\n","import { getArtistsInfo } from '../api/artists-api';\n\nexport const initArtists = async ({ limit, page }) => {\n  return getArtistsInfo({ limit, page });\n};\ndocument.addEventListener('DOMContentLoaded', async () => {\n  const page = 1;\n  const params = { limit: 8, page };\n\n  await initArtists(params);\n});\n","import '../scss/styles.scss';\n\nimport { initHeader } from './sections/header';\nimport { initHero } from './sections/hero';\nimport { initAbout } from './sections/about';\nimport { initArtists } from './sections/artists';\nimport { initFeedback } from './sections/feedback';\nimport { initFooter } from './sections/footer';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initHeader();\n  initHero();\n  initArtists();\n  initAbout();\n  initFeedback();\n  initFooter();\n});\n"],"names":["loaderElement","hideTimeout","MIN_VISIBLE_TIME","lastShowTime","createLoader","showLoader","hideLoader","elapsed","delay","BASE_CONFIG","show","type","title","message","options","iziToast","toast","instance","axios","pendingRequests","startLoading","stopLoading","config","error","response","status","_a","_c","_b","fetchArtists","params","data","getArtistsInfo","initArtists","limit","page"],"mappings":"6vBAAA,IAAIA,EAAgB,KAChBC,EAAc,KAElB,MAAMC,EAAmB,IACzB,IAAIC,EAAe,EAEnB,MAAMC,EAAe,IAAM,CACzBJ,EAAgB,SAAS,cAAc,KAAK,EAC5CA,EAAc,UAAY,SAC1BA,EAAc,UAAY,8BAC1B,SAAS,KAAK,YAAYA,CAAa,CACzC,EAEaK,EAAa,IAAM,CACzBL,GACHI,IAEFD,EAAe,KAAK,MACpBH,EAAc,UAAU,IAAI,YAAY,EAEpCC,IACF,aAAaA,CAAW,EACxBA,EAAc,KAElB,EAEaK,EAAa,IAAM,CAC9B,GAAI,CAACN,EAAe,OAEpB,MAAMO,EAAU,KAAK,IAAG,EAAKJ,EACvBK,EAAQ,KAAK,IAAI,EAAGN,EAAmBK,CAAO,EAEhDN,GAAa,aAAaA,CAAW,EAEzCA,EAAc,WAAW,IAAM,CACzBD,GACFA,EAAc,UAAU,OAAO,YAAY,EAE7CC,EAAc,IACf,EAAEO,CAAK,CACV,ECrCMC,EAAc,CAClB,SAAU,WACV,QAAS,IACT,aAAc,GACd,aAAc,GACd,YAAa,GACb,cAAe,EACjB,EAEMC,EAAO,CAACC,EAAMC,EAAOC,EAASC,EAAU,CAAA,IAAO,CACnDC,EAASJ,CAAI,EAAE,CACb,MAAAC,EACA,QAAAC,EACA,GAAGJ,EACH,GAAGK,CACP,CAAG,CACH,EAEaE,EAAQ,CACnB,QAAS,CAACH,EAASC,IAAYJ,EAAK,UAAW,UAAWG,EAASC,CAAO,EAE1E,MAAO,CAACD,EAASC,IACfJ,EAAK,QAAS,QAASG,EAAS,CAC9B,QAAS,IACT,GAAGC,CACT,CAAK,EAEH,KAAM,CAACD,EAASC,IAAYJ,EAAK,OAAQ,OAAQG,EAASC,CAAO,CACnE,EC3BMG,EAAWC,EAAM,OAAO,CAC5B,QAAS,sCACT,QAAS,GACX,CAAC,EAED,IAAIC,EAAkB,EACtB,MAAMC,EAAe,IAAM,CACzBD,GAAmB,EACnBd,GACF,EACMgB,EAAc,IAAM,CACxBF,EAAkB,KAAK,IAAI,EAAGA,EAAkB,CAAC,EAC7CA,IAAoB,GAAGb,GAC7B,EAEAW,EAAS,aAAa,QAAQ,IAC5BK,IACEF,IACOE,GAETC,IACEF,IACO,QAAQ,OAAOE,CAAK,EAE/B,EAEAN,EAAS,aAAa,SAAS,IAC7BO,IACEH,IACOG,GAETD,GAAS,WACPF,IAEA,MAAMI,GAASC,EAAAH,EAAM,WAAN,YAAAG,EAAgB,OACzBb,IACJc,GAAAC,EAAAL,EAAM,WAAN,YAAAK,EAAgB,OAAhB,YAAAD,EAAsB,WACrBF,EACG,UAAUA,CAAM,GAChB,gDAEN,OAAAT,EAAM,MAAMH,CAAO,EAEZ,QAAQ,OAAO,CAAE,QAAAA,EAAS,OAAAY,EAAQ,SAAUF,CAAK,CAAE,CAC3D,CACH,EC/CA,MAAMM,EAAeC,GACnBb,EAAS,IAAI,WAAY,CAAE,OAAAa,CAAQ,CAAA,EAAE,KAAK,CAAC,CAAE,KAAAC,KAAWA,CAAI,EAEjDC,EAAiB,MAAMF,GAAU,CAC5C,GAAI,CAEF,OADiB,MAAMD,EAAaC,CAAM,GAC1B,OACjB,OAAQP,EAAO,CACd,MAAMA,CACP,CACH,ECVaU,EAAc,MAAO,CAAE,MAAAC,EAAO,KAAAC,KAClCH,EAAe,CAAE,MAAAE,EAAO,KAAAC,CAAM,CAAA,EAEvC,SAAS,iBAAiB,mBAAoB,SAAY,CAIxD,MAAMF,EAFS,CAAE,MAAO,EAAG,MAAI,CAEP,CAC1B,CAAC,ECDD,SAAS,iBAAiB,mBAAoB,IAAM,CAGlDA,GAIF,CAAC"}