{"version":3,"file":"index.js","sources":["../src/js/utils/loader.js","../src/js/utils/toast.js","../src/js/api/axios-instance.js","../src/js/api/artists-api.js","../src/js/sections/artists.js","../src/js/main.js"],"sourcesContent":["let loaderElement = null;\nlet hideTimeout = null;\n\nconst MIN_VISIBLE_TIME = 300;\nlet lastShowTime = 0;\n\nconst createLoader = () => {\n  loaderElement = document.createElement('div');\n  loaderElement.className = 'loader';\n  loaderElement.innerHTML = '<div class=\"spinner\"></div>';\n  document.body.appendChild(loaderElement);\n};\n\nexport const showLoader = () => {\n  if (!loaderElement) {\n    createLoader();\n  }\n\n  // Показываем лоадер, если он еще не видим\n  if (!loaderElement.classList.contains('is-visible')) {\n    lastShowTime = Date.now();\n    loaderElement.classList.add('is-visible');\n  }\n\n  // Отменяем запланированное скрытие, если оно было\n  if (hideTimeout) {\n    clearTimeout(hideTimeout);\n    hideTimeout = null;\n  }\n};\n\nexport const hideLoader = () => {\n  const elapsed = Date.now() - lastShowTime;\n  const delay = Math.max(0, MIN_VISIBLE_TIME - elapsed);\n\n  if (hideTimeout) clearTimeout(hideTimeout);\n\n  hideTimeout = setTimeout(() => {\n    if (loaderElement) {\n      loaderElement.classList.remove('is-visible');\n    }\n    hideTimeout = null;\n  }, delay);\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst BASE_CONFIG = {\n  position: 'topRight',\n  timeout: 3000,\n  closeOnClick: true,\n  pauseOnHover: true,\n  progressBar: true,\n  animateInside: false,\n};\n\nconst show = (type, title, message, options = {}) => {\n  iziToast[type]({\n    title,\n    message,\n    ...BASE_CONFIG,\n    ...options,\n  });\n};\n\nexport const toast = {\n  success: (message, options) => show('success', 'Success', message, options),\n\n  error: (message, options) =>\n    show('error', 'Error', message, {\n      timeout: 5000,\n      ...options,\n    }),\n\n  info: (message, options) => show('info', 'Info', message, options),\n};\n","import axios from 'axios';\nimport { showLoader, hideLoader } from '../utils/loader';\nimport { toast } from '../utils/toast';\n\nconst instance = axios.create({\n  baseURL: 'https://sound-wave.b.goit.study/api',\n  timeout: 10000,\n});\n\nlet pendingRequests = 0;\nconst startLoading = () => {\n  pendingRequests += 1;\n  showLoader();\n};\nconst stopLoading = () => {\n  pendingRequests = Math.max(0, pendingRequests - 1);\n  if (pendingRequests === 0) hideLoader();\n};\n\ninstance.interceptors.request.use(\n  config => {\n    startLoading();\n    return config;\n  },\n  error => {\n    stopLoading();\n    return Promise.reject(error);\n  }\n);\n\ninstance.interceptors.response.use(\n  response => {\n    stopLoading();\n    return response;\n  },\n  error => {\n    stopLoading();\n\n    const status = error.response?.status;\n    const message =\n      error.response?.data?.message ||\n      (status\n        ? `Error: ${status}`\n        : 'Network error. Please check your connection.');\n\n    toast.error(message);\n\n    return Promise.reject({ message, status, original: error });\n  }\n);\n\nexport default instance;\n","import instance from './axios-instance';\n\nconst fetchArtists = params =>\n  instance.get('/artists', { params }).then(({ data }) => data);\n\nexport const getArtistsInfo = async params => {\n  const response = await fetchArtists(params);\n  return response.artists || [];\n};\n","import { getArtistsInfo } from '../api/artists-api';\nconst list = document.querySelector('.artists__list');\n\nexport const initArtists = async ({ limit, page }) => {\n  return getArtistsInfo({ limit, page });\n};\n\nconst loadMoreBtn = document.querySelector('.artists__button');\nlet page = 1;\nlet params = { limit: 8, page };\n\nloadMoreBtn.addEventListener('click', () => {\n  page += 1;\n  params = { limit: 8, page };\n  loadArtists(params);\n});\n\nasync function loadArtists() {\n  const artists = await initArtists(params);\n  renderArtists(artists);\n}\n\nloadArtists();\n\nfunction createArtistCard(artist) {\n  const { _id, strArtist, strBiographyEN, strArtistThumb, genres } = artist;\n  const genresMarkup =\n    Array.isArray(genres) && genres.length\n      ? genres.map(genre => `<li class=\"artists__genre\">${genre}</li>`).join('')\n      : '';\n\n  return `<li class=\"artists__item\">\n        <img class=\"artists__img\" src=\"${strArtistThumb}\" alt=\"${strArtist}\" />\n        <div class=\"artists__info\">\n          <ul class=\"artists__genres\">\n            ${genresMarkup}\n          </ul>\n          <h3 class=\"artists__name\">${strArtist}</h3>\n          <p class=\"artists__desc\">${strBiographyEN}</p>\n        </div>\n       <button class=\"artists__learn-more\" data-id=\"${_id}\">\n          Learn More <svg class=\"artists__learn-more-icon\" width=\"8\" height=\"14\" viewBox=\"0 0 8 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M0 14L8 7L0 0V14Z\" fill=\"white\" />\n</svg>\n        </button>\n      </li>\n`;\n}\nfunction createArtistsMurkup(artists) {\n  return artists.map(createArtistCard).join('');\n}\n\nexport function renderArtists(artists) {\n  const markup = createArtistsMurkup(artists);\n  list.insertAdjacentHTML('beforeend', markup);\n}\n","import '../scss/styles.scss';\n\nimport { initHeader } from './sections/header';\nimport { initHero } from './sections/hero';\nimport { initAbout } from './sections/about';\nimport { initArtists } from './sections/artists';\nimport { initFeedback } from './sections/feedback';\nimport { initFooter } from './sections/footer';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initHeader();\n  initHero();\n  initArtists({ limit: 8, page: 1 });\n  initAbout();\n  initFeedback();\n  initFooter();\n});\n"],"names":["loaderElement","hideTimeout","MIN_VISIBLE_TIME","lastShowTime","createLoader","showLoader","hideLoader","elapsed","delay","BASE_CONFIG","show","type","title","message","options","iziToast","toast","instance","axios","pendingRequests","startLoading","stopLoading","config","error","response","status","_a","_c","_b","fetchArtists","params","data","getArtistsInfo","list","initArtists","limit","page","loadMoreBtn","loadArtists","artists","renderArtists","createArtistCard","artist","_id","strArtist","strBiographyEN","strArtistThumb","genres","genresMarkup","genre","createArtistsMurkup","markup"],"mappings":"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"}